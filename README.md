# Система учета времени выполнения методов

Данное приложение реализует систему для отслеживания времени выполнения методов с использованием Spring AOP, включая синхронную и асинхронную обработку. Система логирует данные в базу данных и предоставляет REST API для получения статистики.

## Технологии

Проект использует следующие технологии и инструменты:

![Java](https://img.shields.io/badge/java-%23ED8B00.svg?style=for-the-badge&logo=java&logoColor=white "Java")
![Maven](https://img.shields.io/badge/Maven-green.svg?style=for-the-badge&logo=mockito&logoColor=white "Maven")
![Spring](https://img.shields.io/badge/Spring-blueviolet.svg?style=for-the-badge&logo=spring&logoColor=white "Spring")
![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)
![Liquibase](https://img.shields.io/badge/Liquibase-%230073AF.svg?style=for-the-badge&logo=liquibase&logoColor=white "Liquibase")
![GitHub](https://img.shields.io/badge/git-%23121011.svg?style=for-the-badge&logo=github&logoColor=white "Git")
+ Язык программирования: *Java 17*
+ Автоматизация сборки: *Maven*
+ Фреймворк: *Spring*
+ База данных: *PostgreSQL*
+ Миграция данных: *Liquibase*
+ Контроль версий: *Git*
## Реализация системы учета времени выполнения методов

<details>
<summary>Полный текст задания</summary>
Задание: Реализация системы учета времени выполнения методов

Описание:
Вам предстоит разработать систему учета времени выполнения методов в приложении с использованием Spring AOP. Система должна быть способна асинхронно логировать и анализировать данные о времени выполнения методов.

Требования:

Создайте аннотации @TrackTime и @TrackAsyncTime, которые можно применять к методам для отслеживания времени их выполнения.
Реализуйте аспекты, используя Spring AOP, для асинхронного и синхронного отслеживания времени выполнения методов, помеченных соответствующими аннотациями.
Создайте сервис, который будет асинхронно сохранять данные о времени выполнения методов в базе данных.
Реализуйте REST API для получения статистики по времени выполнения методов (например, среднее время выполнения, общее время выполнения) для различных методов и их групп.
Настройте приложение с помощью конфигурации Spring для включения использования AOP и асинхронной обработки данных.

Критерии оценки:

Реализация аспектов:
Правильное применение Spring AOP для создания аспектов.
Корректное определение точек среза для методов, помеченных аннотациями @TrackTime и @TrackAsyncTime.
Обработка исключений и ошибок в аспектах.

Обработка асинхронных вызовов:
Асинхронное отслеживание времени выполнения методов, помеченных аннотацией @TrackAsyncTime.
Корректная обработка результатов асинхронных операций.

Хранение и анализ данных:
Реализация сервиса для асинхронного сохранения данных о времени выполнения методов в базе данных.
Корректное хранение данных в базе данных.
Реализация механизма анализа данных для получения статистики по времени выполнения методов.

REST API:
Создание REST API для получения статистики по времени выполнения методов.
Корректная обработка запросов и передача данных в формате JSON.
Документация API.

Качество кода и архитектура:
Чистота, читаемость и модульность кода.
Соблюдение принципов SOLID и других принципов проектирования.
Правильное использование паттернов проектирования.
</details>

## Установка и запуск

### Предварительные требования

Убедитесь, что у вас установлены следующие инструменты:
- Java 17
- Maven
- PostgreSQL

### Шаги установки

1. Клонируйте репозиторий:
```bash
git clone https://github.com/axma331/execution_time_tracking.git
```
   
2. Перейдите в директорию проекта:
```bash
cd your-repo
```
3. Настройте базу данных в файле application.properties`:
```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/yourdatabase
spring.datasource.username=yourusername
spring.datasource.password=yourpassword
```
4. Запустите приложение с помощью Maven:
```bash
mvn spring-boot:run
```
### Миграции базы данных
Liquibase автоматически применит необходимые миграции при запуске приложения.

### Документация API
После запуска приложения документация API доступна по следующему URL:
```bash
http://localhost:8005/swagger-ui/
```

#### В Swagger UI вы можете просматривать и тестировать все доступные конечные точки.
<details>
<summary>Пример тестирования API через Swagger UI</summary>

1. **Открытие Swagger UI**:

   После запуска приложения, откройте браузер и перейдите по адресу `http://localhost:8005/swagger-ui/`. Вы увидите страницу с доступными API.

   ![Swagger UI Home](https://i.postimg.cc/sxC3CVsV/swagger-ui-1.jpg)

2. **Просмотр доступных API**:

   На главной странице Swagger UI вы увидите список всех доступных конечных точек. Каждая конечная точка имеет описание и параметры запроса.

   ![Swagger UI API Endpoints](https://i.postimg.cc/HsqZdVyD/swagger-ui-1-1.jpg)

3. **Тестирование API**:
   
    ***Подготовка данных***

   Для тестирования, предварительно сгенерируйте тестовые данные используя endpoint ` /api/test/execute`. Разверните соответствующую секцию и нажмите кнопку "Try it out". Затем нажмите "Execute".

   Примеры ответов:
   - 200 - при генерации данных без принудительного прерывания работы тестового метод

      ![Testing API 1](https://i.postimg.cc/DzgBr6Yn/swagger-ui-2.jpg)
   - 500 - при генерации данных с принудительного прерывания работы тестового метода
     ![Testing API 2](https://i.postimg.cc/7ZC5MZs6/swagger-ui-3.jpg)

     ***Тестирование получения статистики***

      Для тестирования конечной точки, разверните соответствующую секцию и нажмите кнопку "Try it out". Затем введите необходимые параметры и нажмите "Execute".

      Пример тестирования API для получения статистики:

      ![Testing API](https://i.postimg.cc/pT09J5Hm/swagger-ui-4.jpg)


4. **Результат выполнения запроса**:

   После выполнения запроса вы увидите результат в формате JSON. Также отобразится информация о статусе запроса и заголовках ответа.

   ![API Response](https://i.postimg.cc/9fbzcwzL/swagger-ui-5.jpg)
</details>

### Примеры использования
Вот несколько примеров использования API для получения статистики времени выполнения методов:

- Получение всей статистики:
    ```bash
    GET /v1/statistics
    ```
- Получение имен методов с идентификатором:
    ```bash
    GET /v1/statistics/method
    ```
- Получение статистики по ID:
    ```bash
    GET /v1/statistics/method/{methodId}
    ```
- Получение статистики по группе методов:
    ```bash
    GET /v1/statistics//group/{group}
    ```